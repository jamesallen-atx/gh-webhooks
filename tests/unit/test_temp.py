import pytest

from gh_webhooks.models import (
    BranchProtectionRuleEdited,
    DiscussionEdited,
    PullRequestAssigned,
)
from gh_webhooks.resolve_event import resolve_event


def test_temp():
    event_json = {
        "action": "edited",
        "rule": {
            "id": 21796960,
            "repository_id": 259377789,
            "name": "production",
            "created_at": "2021-08-19T12:16:32.000-04:00",
            "updated_at": "2021-08-19T12:16:32.000-04:00",
            "pull_request_reviews_enforcement_level": "off",
            "required_approving_review_count": 1,
            "dismiss_stale_reviews_on_push": False,
            "require_code_owner_review": False,
            "authorized_dismissal_actors_only": False,
            "ignore_approvals_from_contributors": False,
            "required_status_checks": ["basic-CI"],
            "required_status_checks_enforcement_level": "non_admins",
            "strict_required_status_checks_policy": False,
            "signature_requirement_enforcement_level": "off",
            "linear_history_requirement_enforcement_level": "off",
            "admin_enforced": False,
            "allow_force_pushes_enforcement_level": "off",
            "allow_deletions_enforcement_level": "off",
            "merge_queue_enforcement_level": "off",
            "required_deployments_enforcement_level": "off",
            "required_conversation_resolution_level": "off",
            "authorized_actors_only": True,
            "authorized_actor_names": ["Codertocat"],
        },
        "changes": {
            "authorized_actors_only": {"from": False},
            "authorized_actor_names": {"from": []},
        },
        "repository": {
            "id": 17273051,
            "node_id": "MDEwOlJlcG9zaXRvcnkxNzI3MzA1MQ==",
            "name": "octo-repo",
            "full_name": "octo-org/octo-repo",
            "private": True,
            "owner": {
                "login": "octo-org",
                "id": 6811672,
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY4MTE2NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6811672?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/octo-org",
                "html_url": "https://github.com/octo-org",
                "followers_url": "https://api.github.com/users/octo-org/followers",
                "following_url": "https://api.github.com/users/octo-org/following{/other_user}",
                "gists_url": "https://api.github.com/users/octo-org/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/octo-org/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/octo-org/subscriptions",
                "organizations_url": "https://api.github.com/users/octo-org/orgs",
                "repos_url": "https://api.github.com/users/octo-org/repos",
                "events_url": "https://api.github.com/users/octo-org/events{/privacy}",
                "received_events_url": "https://api.github.com/users/octo-org/received_events",
                "type": "Organization",
                "site_admin": False,
            },
            "html_url": "https://github.com/octo-org/octo-repo",
            "description": "My first repo on GitHub!",
            "fork": False,
            "url": "https://api.github.com/repos/octo-org/octo-repo",
            "forks_url": "https://api.github.com/repos/octo-org/octo-repo/forks",
            "keys_url": "https://api.github.com/repos/octo-org/octo-repo/keys{/key_id}",
            "collaborators_url": "https://api.github.com/repos/octo-org/octo-repo/collaborators{/collaborator}",
            "teams_url": "https://api.github.com/repos/octo-org/octo-repo/teams",
            "hooks_url": "https://api.github.com/repos/octo-org/octo-repo/hooks",
            "issue_events_url": "https://api.github.com/repos/octo-org/octo-repo/issues/events{/number}",
            "events_url": "https://api.github.com/repos/octo-org/octo-repo/events",
            "assignees_url": "https://api.github.com/repos/octo-org/octo-repo/assignees{/user}",
            "branches_url": "https://api.github.com/repos/octo-org/octo-repo/branches{/branch}",
            "tags_url": "https://api.github.com/repos/octo-org/octo-repo/tags",
            "blobs_url": "https://api.github.com/repos/octo-org/octo-repo/git/blobs{/sha}",
            "git_tags_url": "https://api.github.com/repos/octo-org/octo-repo/git/tags{/sha}",
            "git_refs_url": "https://api.github.com/repos/octo-org/octo-repo/git/refs{/sha}",
            "trees_url": "https://api.github.com/repos/octo-org/octo-repo/git/trees{/sha}",
            "statuses_url": "https://api.github.com/repos/octo-org/octo-repo/statuses/{sha}",
            "languages_url": "https://api.github.com/repos/octo-org/octo-repo/languages",
            "stargazers_url": "https://api.github.com/repos/octo-org/octo-repo/stargazers",
            "contributors_url": "https://api.github.com/repos/octo-org/octo-repo/contributors",
            "subscribers_url": "https://api.github.com/repos/octo-org/octo-repo/subscribers",
            "subscription_url": "https://api.github.com/repos/octo-org/octo-repo/subscription",
            "commits_url": "https://api.github.com/repos/octo-org/octo-repo/commits{/sha}",
            "git_commits_url": "https://api.github.com/repos/octo-org/octo-repo/git/commits{/sha}",
            "comments_url": "https://api.github.com/repos/octo-org/octo-repo/comments{/number}",
            "issue_comment_url": "https://api.github.com/repos/octo-org/octo-repo/issues/comments{/number}",
            "contents_url": "https://api.github.com/repos/octo-org/octo-repo/contents/{+path}",
            "compare_url": "https://api.github.com/repos/octo-org/octo-repo/compare/{base}...{head}",
            "merges_url": "https://api.github.com/repos/octo-org/octo-repo/merges",
            "archive_url": "https://api.github.com/repos/octo-org/octo-repo/{archive_format}{/ref}",
            "downloads_url": "https://api.github.com/repos/octo-org/octo-repo/downloads",
            "issues_url": "https://api.github.com/repos/octo-org/octo-repo/issues{/number}",
            "pulls_url": "https://api.github.com/repos/octo-org/octo-repo/pulls{/number}",
            "milestones_url": "https://api.github.com/repos/octo-org/octo-repo/milestones{/number}",
            "notifications_url": "https://api.github.com/repos/octo-org/octo-repo/notifications{?since,all,participating}",
            "labels_url": "https://api.github.com/repos/octo-org/octo-repo/labels{/name}",
            "releases_url": "https://api.github.com/repos/octo-org/octo-repo/releases{/id}",
            "deployments_url": "https://api.github.com/repos/octo-org/octo-repo/deployments",
            "created_at": "2014-02-28T02:42:51Z",
            "updated_at": "2021-03-11T14:54:13Z",
            "pushed_at": "2021-03-11T14:54:10Z",
            "git_url": "git://github.com/octo-org/octo-repo.git",
            "ssh_url": "org-6811672@github.com:octo-org/octo-repo.git",
            "clone_url": "https://github.com/octo-org/octo-repo.git",
            "svn_url": "https://github.com/octo-org/octo-repo",
            "homepage": "",
            "size": 300,
            "stargazers_count": 0,
            "watchers_count": 0,
            "language": "JavaScript",
            "has_issues": True,
            "has_projects": False,
            "has_downloads": True,
            "has_wiki": False,
            "has_pages": True,
            "forks_count": 0,
            "mirror_url": None,
            "archived": False,
            "disabled": False,
            "open_issues_count": 39,
            "license": None,
            "forks": 0,
            "open_issues": 39,
            "watchers": 0,
            "default_branch": "main",
            "is_template": False,
            "topics": [],
            "visibility": "public",
        },
        "organization": {
            "login": "octo-org",
            "id": 6811672,
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY4MTE2NzI=",
            "url": "https://api.github.com/orgs/octo-org",
            "repos_url": "https://api.github.com/orgs/octo-org/repos",
            "events_url": "https://api.github.com/orgs/octo-org/events",
            "hooks_url": "https://api.github.com/orgs/octo-org/hooks",
            "issues_url": "https://api.github.com/orgs/octo-org/issues",
            "members_url": "https://api.github.com/orgs/octo-org/members{/member}",
            "public_members_url": "https://api.github.com/orgs/octo-org/public_members{/member}",
            "avatar_url": "https://avatars.githubusercontent.com/u/6811672?v=4",
            "description": "Working better together!",
        },
        "sender": {
            "login": "Codertocat",
            "id": 21031067,
            "node_id": "MDQ6VXNlcjIxMDMxMDY3",
            "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Codertocat",
            "html_url": "https://github.com/Codertocat",
            "followers_url": "https://api.github.com/users/Codertocat/followers",
            "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
            "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
            "organizations_url": "https://api.github.com/users/Codertocat/orgs",
            "repos_url": "https://api.github.com/users/Codertocat/repos",
            "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Codertocat/received_events",
            "type": "User",
            "site_admin": False,
        },
    }

    parsed = resolve_event(event_json)
    assert isinstance(parsed, BranchProtectionRuleEdited)


def test_temp2():
    event_json = {
        "action": "completed",
        "check_run": {
            "id": 128620228,
            "node_id": "MDg6Q2hlY2tSdW4xMjg2MjAyMjg=",
            "head_sha": "ec26c3e57ca3a959ca5aad62de7213c562f8c821",
            "external_id": "",
            "url": "https://api.github.com/repos/Codertocat/Hello-World/check-runs/128620228",
            "html_url": "https://github.com/Codertocat/Hello-World/runs/128620228",
            "details_url": "https://octocoders.io",
            "status": "completed",
            "conclusion": "failure",
            "started_at": "2019-05-15T15:21:12Z",
            "completed_at": "2019-05-15T15:21:12Z",
            "output": {
                "title": None,
                "summary": None,
                "text": None,
                "annotations_count": 0,
                "annotations_url": "https://api.github.com/repos/Codertocat/Hello-World/check-runs/128620228/annotations",
            },
            "name": "Octocoders-linter",
            "check_suite": {
                "id": 118578147,
                "node_id": "MDEwOkNoZWNrU3VpdGUxMTg1NzgxNDc=",
                "head_branch": "changes",
                "head_sha": "ec26c3e57ca3a959ca5aad62de7213c562f8c821",
                "status": "in_progress",
                "conclusion": None,
                "url": "https://api.github.com/repos/Codertocat/Hello-World/check-suites/118578147",
                "before": "6113728f27ae82c7b1a177c8d03f9e96e0adf246",
                "after": "ec26c3e57ca3a959ca5aad62de7213c562f8c821",
                "pull_requests": [
                    {
                        "url": "https://api.github.com/repos/Codertocat/Hello-World/pulls/2",
                        "id": 279147437,
                        "number": 2,
                        "head": {
                            "ref": "changes",
                            "sha": "ec26c3e57ca3a959ca5aad62de7213c562f8c821",
                            "repo": {
                                "id": 186853002,
                                "url": "https://api.github.com/repos/Codertocat/Hello-World",
                                "name": "Hello-World",
                            },
                        },
                        "base": {
                            "ref": "master",
                            "sha": "f95f852bd8fca8fcc58a9a2d6c842781e32a215e",
                            "repo": {
                                "id": 186853002,
                                "url": "https://api.github.com/repos/Codertocat/Hello-World",
                                "name": "Hello-World",
                            },
                        },
                    }
                ],
                "app": {
                    "id": 29310,
                    "slug": "github-actions",
                    "node_id": "MDM6QXBwMjkzMTA=",
                    "owner": {
                        "login": "Octocoders",
                        "id": 38302899,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjM4MzAyODk5",
                        "avatar_url": "https://avatars1.githubusercontent.com/u/38302899?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Octocoders",
                        "html_url": "https://github.com/Octocoders",
                        "followers_url": "https://api.github.com/users/Octocoders/followers",
                        "following_url": "https://api.github.com/users/Octocoders/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Octocoders/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Octocoders/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Octocoders/subscriptions",
                        "organizations_url": "https://api.github.com/users/Octocoders/orgs",
                        "repos_url": "https://api.github.com/users/Octocoders/repos",
                        "events_url": "https://api.github.com/users/Octocoders/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Octocoders/received_events",
                        "type": "Organization",
                        "site_admin": False,
                    },
                    "name": "octocoders-linter",
                    "description": "",
                    "external_url": "https://octocoders.io",
                    "html_url": "https://github.com/apps/octocoders-linter",
                    "created_at": "2019-04-19T19:36:24Z",
                    "updated_at": "2019-04-19T19:36:56Z",
                    "permissions": {
                        "actions": "write",
                        "checks": "write",
                        "contents": "write",
                        "deployments": "write",
                        "issues": "write",
                        "members": "write",
                        "metadata": "read",
                        "organization_packages": "write",
                        "packages": "write",
                        "pages": "write",
                        "pull_requests": "write",
                        "repository_hooks": "write",
                        "repository_projects": "write",
                        "security_events": "write",
                        "statuses": "write",
                        "vulnerability_alerts": "read",
                    },
                    "events": [],
                },
                "created_at": "2019-05-15T15:20:31Z",
                "updated_at": "2019-05-15T15:21:14Z",
            },
            "app": {
                "id": 29310,
                "slug": "github-actions",
                "node_id": "MDM6QXBwMjkzMTA=",
                "owner": {
                    "login": "Octocoders",
                    "id": 38302899,
                    "node_id": "MDEyOk9yZ2FuaXphdGlvbjM4MzAyODk5",
                    "avatar_url": "https://avatars1.githubusercontent.com/u/38302899?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Octocoders",
                    "html_url": "https://github.com/Octocoders",
                    "followers_url": "https://api.github.com/users/Octocoders/followers",
                    "following_url": "https://api.github.com/users/Octocoders/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Octocoders/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Octocoders/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Octocoders/subscriptions",
                    "organizations_url": "https://api.github.com/users/Octocoders/orgs",
                    "repos_url": "https://api.github.com/users/Octocoders/repos",
                    "events_url": "https://api.github.com/users/Octocoders/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Octocoders/received_events",
                    "type": "Organization",
                    "site_admin": False,
                },
                "name": "octocoders-linter",
                "description": "",
                "external_url": "https://octocoders.io",
                "html_url": "https://github.com/apps/octocoders-linter",
                "created_at": "2019-04-19T19:36:24Z",
                "updated_at": "2019-04-19T19:36:56Z",
                "permissions": {
                    "actions": "write",
                    "checks": "write",
                    "contents": "write",
                    "deployments": "write",
                    "issues": "write",
                    "metadata": "read",
                    "organization_packages": "write",
                    "packages": "write",
                    "pages": "write",
                    "pull_requests": "write",
                    "repository_hooks": "write",
                    "repository_projects": "write",
                    "security_events": "write",
                    "statuses": "write",
                    "vulnerability_alerts": "read",
                },
                "events": [],
            },
            "pull_requests": [
                {
                    "url": "https://api.github.com/repos/Codertocat/Hello-World/pulls/2",
                    "id": 279147437,
                    "number": 2,
                    "head": {
                        "ref": "changes",
                        "sha": "ec26c3e57ca3a959ca5aad62de7213c562f8c821",
                        "repo": {
                            "id": 186853002,
                            "url": "https://api.github.com/repos/Codertocat/Hello-World",
                            "name": "Hello-World",
                        },
                    },
                    "base": {
                        "ref": "master",
                        "sha": "f95f852bd8fca8fcc58a9a2d6c842781e32a215e",
                        "repo": {
                            "id": 186853002,
                            "url": "https://api.github.com/repos/Codertocat/Hello-World",
                            "name": "Hello-World",
                        },
                    },
                }
            ],
        },
        "repository": {
            "id": 186853002,
            "node_id": "MDEwOlJlcG9zaXRvcnkxODY4NTMwMDI=",
            "name": "Hello-World",
            "full_name": "Codertocat/Hello-World",
            "private": False,
            "owner": {
                "login": "Codertocat",
                "id": 21031067,
                "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Codertocat",
                "html_url": "https://github.com/Codertocat",
                "followers_url": "https://api.github.com/users/Codertocat/followers",
                "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
                "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
                "organizations_url": "https://api.github.com/users/Codertocat/orgs",
                "repos_url": "https://api.github.com/users/Codertocat/repos",
                "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Codertocat/received_events",
                "type": "User",
                "site_admin": False,
            },
            "html_url": "https://github.com/Codertocat/Hello-World",
            "description": None,
            "fork": False,
            "url": "https://api.github.com/repos/Codertocat/Hello-World",
            "forks_url": "https://api.github.com/repos/Codertocat/Hello-World/forks",
            "keys_url": "https://api.github.com/repos/Codertocat/Hello-World/keys{/key_id}",
            "collaborators_url": "https://api.github.com/repos/Codertocat/Hello-World/collaborators{/collaborator}",
            "teams_url": "https://api.github.com/repos/Codertocat/Hello-World/teams",
            "hooks_url": "https://api.github.com/repos/Codertocat/Hello-World/hooks",
            "issue_events_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/events{/number}",
            "events_url": "https://api.github.com/repos/Codertocat/Hello-World/events",
            "assignees_url": "https://api.github.com/repos/Codertocat/Hello-World/assignees{/user}",
            "branches_url": "https://api.github.com/repos/Codertocat/Hello-World/branches{/branch}",
            "tags_url": "https://api.github.com/repos/Codertocat/Hello-World/tags",
            "blobs_url": "https://api.github.com/repos/Codertocat/Hello-World/git/blobs{/sha}",
            "git_tags_url": "https://api.github.com/repos/Codertocat/Hello-World/git/tags{/sha}",
            "git_refs_url": "https://api.github.com/repos/Codertocat/Hello-World/git/refs{/sha}",
            "trees_url": "https://api.github.com/repos/Codertocat/Hello-World/git/trees{/sha}",
            "statuses_url": "https://api.github.com/repos/Codertocat/Hello-World/statuses/{sha}",
            "languages_url": "https://api.github.com/repos/Codertocat/Hello-World/languages",
            "stargazers_url": "https://api.github.com/repos/Codertocat/Hello-World/stargazers",
            "contributors_url": "https://api.github.com/repos/Codertocat/Hello-World/contributors",
            "subscribers_url": "https://api.github.com/repos/Codertocat/Hello-World/subscribers",
            "subscription_url": "https://api.github.com/repos/Codertocat/Hello-World/subscription",
            "commits_url": "https://api.github.com/repos/Codertocat/Hello-World/commits{/sha}",
            "git_commits_url": "https://api.github.com/repos/Codertocat/Hello-World/git/commits{/sha}",
            "comments_url": "https://api.github.com/repos/Codertocat/Hello-World/comments{/number}",
            "issue_comment_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/comments{/number}",
            "contents_url": "https://api.github.com/repos/Codertocat/Hello-World/contents/{+path}",
            "compare_url": "https://api.github.com/repos/Codertocat/Hello-World/compare/{base}...{head}",
            "merges_url": "https://api.github.com/repos/Codertocat/Hello-World/merges",
            "archive_url": "https://api.github.com/repos/Codertocat/Hello-World/{archive_format}{/ref}",
            "downloads_url": "https://api.github.com/repos/Codertocat/Hello-World/downloads",
            "issues_url": "https://api.github.com/repos/Codertocat/Hello-World/issues{/number}",
            "pulls_url": "https://api.github.com/repos/Codertocat/Hello-World/pulls{/number}",
            "milestones_url": "https://api.github.com/repos/Codertocat/Hello-World/milestones{/number}",
            "notifications_url": "https://api.github.com/repos/Codertocat/Hello-World/notifications{?since,all,participating}",
            "labels_url": "https://api.github.com/repos/Codertocat/Hello-World/labels{/name}",
            "releases_url": "https://api.github.com/repos/Codertocat/Hello-World/releases{/id}",
            "deployments_url": "https://api.github.com/repos/Codertocat/Hello-World/deployments",
            "created_at": "2019-05-15T15:19:25Z",
            "updated_at": "2019-05-15T15:21:14Z",
            "pushed_at": "2019-05-15T15:20:57Z",
            "git_url": "git://github.com/Codertocat/Hello-World.git",
            "ssh_url": "git@github.com:Codertocat/Hello-World.git",
            "clone_url": "https://github.com/Codertocat/Hello-World.git",
            "svn_url": "https://github.com/Codertocat/Hello-World",
            "homepage": None,
            "size": 0,
            "stargazers_count": 0,
            "watchers_count": 0,
            "language": "Ruby",
            "has_issues": True,
            "has_projects": True,
            "has_downloads": True,
            "has_wiki": True,
            "has_pages": True,
            "forks_count": 0,
            "mirror_url": None,
            "archived": False,
            "disabled": False,
            "open_issues_count": 2,
            "license": None,
            "forks": 0,
            "open_issues": 2,
            "watchers": 0,
            "default_branch": "master",
            "is_template": False,
            "topics": [],
            "visibility": "public",
        },
        "sender": {
            "login": "Codertocat",
            "id": 21031067,
            "node_id": "MDQ6VXNlcjIxMDMxMDY3",
            "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Codertocat",
            "html_url": "https://github.com/Codertocat",
            "followers_url": "https://api.github.com/users/Codertocat/followers",
            "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
            "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
            "organizations_url": "https://api.github.com/users/Codertocat/orgs",
            "repos_url": "https://api.github.com/users/Codertocat/repos",
            "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Codertocat/received_events",
            "type": "User",
            "site_admin": False,
        },
    }

    parsed = resolve_event(event_json)
    # assert isinstance(parsed, BranchProtectionRuleEdited)


def test_temp3():
    event_json = {
        "action": "edited",
        "discussion": {
            "repository_url": "https://api.github.com/repos/Codertocat/Hello-World",
            "category": {
                "id": 32809314,
                "repository_id": 186853002,
                "emoji": ":speech_balloon:",
                "name": "General",
                "description": "Chat about anything and everything here",
                "created_at": "2021-03-30T16:09:00.000-04:00",
                "updated_at": "2021-03-30T16:09:00.000-04:00",
                "slug": "general",
                "is_answerable": False,
            },
            "answer_html_url": None,
            "answer_chosen_at": None,
            "answer_chosen_by": None,
            "html_url": "https://github.com/Codertocat/Hello-World/discussions/4",
            "id": 3299614,
            "node_id": "MDEwOkRpc2N1c3Npb24zMjk5NjE0",
            "number": 4,
            "title": "TEST edit",
            "user": {
                "login": "Codertocat",
                "id": 21031067,
                "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Codertocat",
                "html_url": "https://github.com/Codertocat",
                "followers_url": "https://api.github.com/users/Codertocat/followers",
                "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
                "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
                "organizations_url": "https://api.github.com/users/Codertocat/orgs",
                "repos_url": "https://api.github.com/users/Codertocat/repos",
                "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Codertocat/received_events",
                "type": "User",
                "site_admin": False,
            },
            "state": "open",
            "locked": False,
            "comments": 0,
            "created_at": "2021-03-30T20:09:52Z",
            "updated_at": "2021-03-30T20:26:24Z",
            "author_association": "OWNER",
            "active_lock_reason": None,
            "body": "TEST edit",
            "reactions": {
                "url": "https://api.github.com/repos/Codertocat/Hello-World/discussions/4/reactions",
                "total_count": 0,
                "+1": 0,
                "-1": 0,
                "laugh": 0,
                "hooray": 0,
                "confused": 0,
                "heart": 0,
                "rocket": 0,
                "eyes": 0,
            },
        },
        "changes": {"title": {"from": "TEST"}},
        "repository": {
            "id": 186853002,
            "node_id": "MDEwOlJlcG9zaXRvcnkxODY4NTMwMDI=",
            "name": "Hello-World",
            "full_name": "Codertocat/Hello-World",
            "private": False,
            "owner": {
                "login": "Codertocat",
                "id": 21031067,
                "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Codertocat",
                "html_url": "https://github.com/Codertocat",
                "followers_url": "https://api.github.com/users/Codertocat/followers",
                "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
                "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
                "organizations_url": "https://api.github.com/users/Codertocat/orgs",
                "repos_url": "https://api.github.com/users/Codertocat/repos",
                "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Codertocat/received_events",
                "type": "User",
                "site_admin": False,
            },
            "html_url": "https://github.com/Codertocat/Hello-World",
            "description": None,
            "fork": False,
            "url": "https://api.github.com/repos/Codertocat/Hello-World",
            "forks_url": "https://api.github.com/repos/Codertocat/Hello-World/forks",
            "keys_url": "https://api.github.com/repos/Codertocat/Hello-World/keys{/key_id}",
            "collaborators_url": "https://api.github.com/repos/Codertocat/Hello-World/collaborators{/collaborator}",
            "teams_url": "https://api.github.com/repos/Codertocat/Hello-World/teams",
            "hooks_url": "https://api.github.com/repos/Codertocat/Hello-World/hooks",
            "issue_events_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/events{/number}",
            "events_url": "https://api.github.com/repos/Codertocat/Hello-World/events",
            "assignees_url": "https://api.github.com/repos/Codertocat/Hello-World/assignees{/user}",
            "branches_url": "https://api.github.com/repos/Codertocat/Hello-World/branches{/branch}",
            "tags_url": "https://api.github.com/repos/Codertocat/Hello-World/tags",
            "blobs_url": "https://api.github.com/repos/Codertocat/Hello-World/git/blobs{/sha}",
            "git_tags_url": "https://api.github.com/repos/Codertocat/Hello-World/git/tags{/sha}",
            "git_refs_url": "https://api.github.com/repos/Codertocat/Hello-World/git/refs{/sha}",
            "trees_url": "https://api.github.com/repos/Codertocat/Hello-World/git/trees{/sha}",
            "statuses_url": "https://api.github.com/repos/Codertocat/Hello-World/statuses/{sha}",
            "languages_url": "https://api.github.com/repos/Codertocat/Hello-World/languages",
            "stargazers_url": "https://api.github.com/repos/Codertocat/Hello-World/stargazers",
            "contributors_url": "https://api.github.com/repos/Codertocat/Hello-World/contributors",
            "subscribers_url": "https://api.github.com/repos/Codertocat/Hello-World/subscribers",
            "subscription_url": "https://api.github.com/repos/Codertocat/Hello-World/subscription",
            "commits_url": "https://api.github.com/repos/Codertocat/Hello-World/commits{/sha}",
            "git_commits_url": "https://api.github.com/repos/Codertocat/Hello-World/git/commits{/sha}",
            "comments_url": "https://api.github.com/repos/Codertocat/Hello-World/comments{/number}",
            "issue_comment_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/comments{/number}",
            "contents_url": "https://api.github.com/repos/Codertocat/Hello-World/contents/{+path}",
            "compare_url": "https://api.github.com/repos/Codertocat/Hello-World/compare/{base}...{head}",
            "merges_url": "https://api.github.com/repos/Codertocat/Hello-World/merges",
            "archive_url": "https://api.github.com/repos/Codertocat/Hello-World/{archive_format}{/ref}",
            "downloads_url": "https://api.github.com/repos/Codertocat/Hello-World/downloads",
            "issues_url": "https://api.github.com/repos/Codertocat/Hello-World/issues{/number}",
            "pulls_url": "https://api.github.com/repos/Codertocat/Hello-World/pulls{/number}",
            "milestones_url": "https://api.github.com/repos/Codertocat/Hello-World/milestones{/number}",
            "notifications_url": "https://api.github.com/repos/Codertocat/Hello-World/notifications{?since,all,participating}",
            "labels_url": "https://api.github.com/repos/Codertocat/Hello-World/labels{/name}",
            "releases_url": "https://api.github.com/repos/Codertocat/Hello-World/releases{/id}",
            "deployments_url": "https://api.github.com/repos/Codertocat/Hello-World/deployments",
            "created_at": "2019-05-15T15:19:25Z",
            "updated_at": "2019-05-15T15:20:41Z",
            "pushed_at": "2019-05-15T15:20:52Z",
            "git_url": "git://github.com/Codertocat/Hello-World.git",
            "ssh_url": "git@github.com:Codertocat/Hello-World.git",
            "clone_url": "https://github.com/Codertocat/Hello-World.git",
            "svn_url": "https://github.com/Codertocat/Hello-World",
            "homepage": None,
            "size": 0,
            "stargazers_count": 0,
            "watchers_count": 0,
            "language": "Ruby",
            "has_issues": True,
            "has_projects": True,
            "has_downloads": True,
            "has_wiki": True,
            "has_pages": True,
            "forks_count": 1,
            "mirror_url": None,
            "archived": False,
            "disabled": False,
            "open_issues_count": 2,
            "license": None,
            "forks": 1,
            "open_issues": 2,
            "watchers": 0,
            "default_branch": "master",
            "is_template": False,
            "topics": [],
            "visibility": "public",
        },
        "sender": {
            "login": "Codertocat",
            "id": 21031067,
            "node_id": "MDQ6VXNlcjIxMDMxMDY3",
            "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Codertocat",
            "html_url": "https://github.com/Codertocat",
            "followers_url": "https://api.github.com/users/Codertocat/followers",
            "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
            "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
            "organizations_url": "https://api.github.com/users/Codertocat/orgs",
            "repos_url": "https://api.github.com/users/Codertocat/repos",
            "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Codertocat/received_events",
            "type": "User",
            "site_admin": False,
        },
        "installation": {
            "id": 1,
            "node_id": "MDIzOkludGVncmF0aW9uSW5zdGFsbGF0aW9uMQ==",
        },
    }

    parsed = DiscussionEdited.parse_obj(_preprocess_keys(event_json))
    # parsed = resolve_event(event_json)
    # assert isinstance(parsed, BranchProtectionRuleEdited)


def test_temp4():
    event_json = {
        "action": "assigned",
        "number": 2,
        "pull_request": {
            "url": "https://api.github.com/repos/Codertocat/Hello-World/pulls/2",
            "id": 279147437,
            "node_id": "MDExOlB1bGxSZXF1ZXN0Mjc5MTQ3NDM3",
            "html_url": "https://github.com/Codertocat/Hello-World/pull/2",
            "diff_url": "https://github.com/Codertocat/Hello-World/pull/2.diff",
            "patch_url": "https://github.com/Codertocat/Hello-World/pull/2.patch",
            "issue_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/2",
            "number": 2,
            "state": "open",
            "locked": False,
            "title": "Update the README with new information.",
            "user": {
                "login": "Codertocat",
                "id": 21031067,
                "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Codertocat",
                "html_url": "https://github.com/Codertocat",
                "followers_url": "https://api.github.com/users/Codertocat/followers",
                "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
                "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
                "organizations_url": "https://api.github.com/users/Codertocat/orgs",
                "repos_url": "https://api.github.com/users/Codertocat/repos",
                "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Codertocat/received_events",
                "type": "User",
                "site_admin": False,
            },
            "body": "This is a pretty simple change that we need to pull into master.",
            "created_at": "2019-05-15T15:20:33Z",
            "updated_at": "2019-05-15T15:20:33Z",
            "closed_at": None,
            "merged_at": None,
            "merge_commit_sha": "c4295bd74fb0f4fda03689c3df3f2803b658fd85",
            "assignee": None,
            "assignees": [
                {
                    "login": "Codertocat",
                    "id": 21031067,
                    "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                    "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Codertocat",
                    "html_url": "https://github.com/Codertocat",
                    "followers_url": "https://api.github.com/users/Codertocat/followers",
                    "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
                    "organizations_url": "https://api.github.com/users/Codertocat/orgs",
                    "repos_url": "https://api.github.com/users/Codertocat/repos",
                    "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Codertocat/received_events",
                    "type": "User",
                    "site_admin": False,
                }
            ],
            "requested_reviewers": [
                {
                    "login": "octocat",
                    "id": 5346,
                    "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                    "avatar_url": "http://alambic.github.com/avatars/u/5346?",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/octocat",
                    "html_url": "http://github.com/octocat",
                    "followers_url": "https://api.github.com/users/octocat/followers",
                    "following_url": "https://api.github.com/users/octocat/following{/other_user}",
                    "gists_url": "https://api.github.com/users/octocat/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/octocat/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/octocat/subscriptions",
                    "organizations_url": "https://api.github.com/users/octocat/orgs",
                    "repos_url": "https://api.github.com/users/octocat/repos",
                    "events_url": "https://api.github.com/users/octocat/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/octocat/received_events",
                    "type": "User",
                    "site_admin": False,
                }
            ],
            "requested_teams": [],
            "labels": [
                {
                    "id": 1362934389,
                    "node_id": "MDU6TGFiZWwxMzYyOTM0Mzg5",
                    "url": "https://api.github.com/repos/Codertocat/Hello-World/labels/bug",
                    "name": "bug",
                    "color": "d73a4a",
                    "default": True,
                    "description": "Something isn't working",
                }
            ],
            "milestone": None,
            "commits_url": "https://api.github.com/repos/Codertocat/Hello-World/pulls/2/commits",
            "review_comments_url": "https://api.github.com/repos/Codertocat/Hello-World/pulls/2/comments",
            "review_comment_url": "https://api.github.com/repos/Codertocat/Hello-World/pulls/comments{/number}",
            "comments_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/2/comments",
            "statuses_url": "https://api.github.com/repos/Codertocat/Hello-World/statuses/ec26c3e57ca3a959ca5aad62de7213c562f8c821",
            "head": {
                "label": "Codertocat:changes",
                "ref": "changes",
                "sha": "ec26c3e57ca3a959ca5aad62de7213c562f8c821",
                "user": {
                    "login": "Codertocat",
                    "id": 21031067,
                    "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                    "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Codertocat",
                    "html_url": "https://github.com/Codertocat",
                    "followers_url": "https://api.github.com/users/Codertocat/followers",
                    "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
                    "organizations_url": "https://api.github.com/users/Codertocat/orgs",
                    "repos_url": "https://api.github.com/users/Codertocat/repos",
                    "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Codertocat/received_events",
                    "type": "User",
                    "site_admin": False,
                },
                "repo": {
                    "id": 186853002,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxODY4NTMwMDI=",
                    "name": "Hello-World",
                    "full_name": "Codertocat/Hello-World",
                    "private": False,
                    "owner": {
                        "login": "Codertocat",
                        "id": 21031067,
                        "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                        "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Codertocat",
                        "html_url": "https://github.com/Codertocat",
                        "followers_url": "https://api.github.com/users/Codertocat/followers",
                        "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
                        "organizations_url": "https://api.github.com/users/Codertocat/orgs",
                        "repos_url": "https://api.github.com/users/Codertocat/repos",
                        "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Codertocat/received_events",
                        "type": "User",
                        "site_admin": False,
                    },
                    "html_url": "https://github.com/Codertocat/Hello-World",
                    "description": None,
                    "fork": False,
                    "url": "https://api.github.com/repos/Codertocat/Hello-World",
                    "forks_url": "https://api.github.com/repos/Codertocat/Hello-World/forks",
                    "keys_url": "https://api.github.com/repos/Codertocat/Hello-World/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/Codertocat/Hello-World/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/Codertocat/Hello-World/teams",
                    "hooks_url": "https://api.github.com/repos/Codertocat/Hello-World/hooks",
                    "issue_events_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/Codertocat/Hello-World/events",
                    "assignees_url": "https://api.github.com/repos/Codertocat/Hello-World/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/Codertocat/Hello-World/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/Codertocat/Hello-World/tags",
                    "blobs_url": "https://api.github.com/repos/Codertocat/Hello-World/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/Codertocat/Hello-World/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/Codertocat/Hello-World/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/Codertocat/Hello-World/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/Codertocat/Hello-World/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/Codertocat/Hello-World/languages",
                    "stargazers_url": "https://api.github.com/repos/Codertocat/Hello-World/stargazers",
                    "contributors_url": "https://api.github.com/repos/Codertocat/Hello-World/contributors",
                    "subscribers_url": "https://api.github.com/repos/Codertocat/Hello-World/subscribers",
                    "subscription_url": "https://api.github.com/repos/Codertocat/Hello-World/subscription",
                    "commits_url": "https://api.github.com/repos/Codertocat/Hello-World/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/Codertocat/Hello-World/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/Codertocat/Hello-World/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/Codertocat/Hello-World/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/Codertocat/Hello-World/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/Codertocat/Hello-World/merges",
                    "archive_url": "https://api.github.com/repos/Codertocat/Hello-World/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/Codertocat/Hello-World/downloads",
                    "issues_url": "https://api.github.com/repos/Codertocat/Hello-World/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/Codertocat/Hello-World/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/Codertocat/Hello-World/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/Codertocat/Hello-World/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/Codertocat/Hello-World/labels{/name}",
                    "releases_url": "https://api.github.com/repos/Codertocat/Hello-World/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/Codertocat/Hello-World/deployments",
                    "created_at": "2019-05-15T15:19:25Z",
                    "updated_at": "2019-05-15T15:20:34Z",
                    "pushed_at": "2019-05-15T15:20:33Z",
                    "git_url": "git://github.com/Codertocat/Hello-World.git",
                    "ssh_url": "git@github.com:Codertocat/Hello-World.git",
                    "clone_url": "https://github.com/Codertocat/Hello-World.git",
                    "svn_url": "https://github.com/Codertocat/Hello-World",
                    "homepage": None,
                    "size": 0,
                    "stargazers_count": 0,
                    "watchers_count": 0,
                    "language": "Ruby",
                    "has_issues": True,
                    "has_projects": True,
                    "has_downloads": True,
                    "has_wiki": True,
                    "has_pages": True,
                    "forks_count": 0,
                    "mirror_url": None,
                    "archived": False,
                    "disabled": False,
                    "open_issues_count": 2,
                    "license": None,
                    "forks": 0,
                    "open_issues": 2,
                    "watchers": 0,
                    "default_branch": "master",
                    "is_template": False,
                    "topics": [],
                    "visibility": "public",
                },
            },
            "base": {
                "label": "Codertocat:master",
                "ref": "master",
                "sha": "f95f852bd8fca8fcc58a9a2d6c842781e32a215e",
                "user": {
                    "login": "Codertocat",
                    "id": 21031067,
                    "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                    "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Codertocat",
                    "html_url": "https://github.com/Codertocat",
                    "followers_url": "https://api.github.com/users/Codertocat/followers",
                    "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
                    "organizations_url": "https://api.github.com/users/Codertocat/orgs",
                    "repos_url": "https://api.github.com/users/Codertocat/repos",
                    "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Codertocat/received_events",
                    "type": "User",
                    "site_admin": False,
                },
                "repo": {
                    "id": 186853002,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxODY4NTMwMDI=",
                    "name": "Hello-World",
                    "full_name": "Codertocat/Hello-World",
                    "private": False,
                    "owner": {
                        "login": "Codertocat",
                        "id": 21031067,
                        "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                        "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Codertocat",
                        "html_url": "https://github.com/Codertocat",
                        "followers_url": "https://api.github.com/users/Codertocat/followers",
                        "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
                        "organizations_url": "https://api.github.com/users/Codertocat/orgs",
                        "repos_url": "https://api.github.com/users/Codertocat/repos",
                        "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Codertocat/received_events",
                        "type": "User",
                        "site_admin": False,
                    },
                    "html_url": "https://github.com/Codertocat/Hello-World",
                    "description": None,
                    "fork": False,
                    "url": "https://api.github.com/repos/Codertocat/Hello-World",
                    "forks_url": "https://api.github.com/repos/Codertocat/Hello-World/forks",
                    "keys_url": "https://api.github.com/repos/Codertocat/Hello-World/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/Codertocat/Hello-World/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/Codertocat/Hello-World/teams",
                    "hooks_url": "https://api.github.com/repos/Codertocat/Hello-World/hooks",
                    "issue_events_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/Codertocat/Hello-World/events",
                    "assignees_url": "https://api.github.com/repos/Codertocat/Hello-World/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/Codertocat/Hello-World/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/Codertocat/Hello-World/tags",
                    "blobs_url": "https://api.github.com/repos/Codertocat/Hello-World/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/Codertocat/Hello-World/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/Codertocat/Hello-World/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/Codertocat/Hello-World/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/Codertocat/Hello-World/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/Codertocat/Hello-World/languages",
                    "stargazers_url": "https://api.github.com/repos/Codertocat/Hello-World/stargazers",
                    "contributors_url": "https://api.github.com/repos/Codertocat/Hello-World/contributors",
                    "subscribers_url": "https://api.github.com/repos/Codertocat/Hello-World/subscribers",
                    "subscription_url": "https://api.github.com/repos/Codertocat/Hello-World/subscription",
                    "commits_url": "https://api.github.com/repos/Codertocat/Hello-World/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/Codertocat/Hello-World/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/Codertocat/Hello-World/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/Codertocat/Hello-World/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/Codertocat/Hello-World/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/Codertocat/Hello-World/merges",
                    "archive_url": "https://api.github.com/repos/Codertocat/Hello-World/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/Codertocat/Hello-World/downloads",
                    "issues_url": "https://api.github.com/repos/Codertocat/Hello-World/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/Codertocat/Hello-World/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/Codertocat/Hello-World/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/Codertocat/Hello-World/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/Codertocat/Hello-World/labels{/name}",
                    "releases_url": "https://api.github.com/repos/Codertocat/Hello-World/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/Codertocat/Hello-World/deployments",
                    "created_at": "2019-05-15T15:19:25Z",
                    "updated_at": "2019-05-15T15:20:34Z",
                    "pushed_at": "2019-05-15T15:20:33Z",
                    "git_url": "git://github.com/Codertocat/Hello-World.git",
                    "ssh_url": "git@github.com:Codertocat/Hello-World.git",
                    "clone_url": "https://github.com/Codertocat/Hello-World.git",
                    "svn_url": "https://github.com/Codertocat/Hello-World",
                    "homepage": None,
                    "size": 0,
                    "stargazers_count": 0,
                    "watchers_count": 0,
                    "language": "Ruby",
                    "has_issues": True,
                    "has_projects": True,
                    "has_downloads": True,
                    "has_wiki": True,
                    "has_pages": True,
                    "forks_count": 0,
                    "mirror_url": None,
                    "archived": False,
                    "disabled": False,
                    "open_issues_count": 2,
                    "license": None,
                    "forks": 0,
                    "open_issues": 2,
                    "watchers": 0,
                    "default_branch": "master",
                    "is_template": False,
                    "topics": [],
                    "visibility": "public",
                },
            },
            "_links": {
                "self": {
                    "href": "https://api.github.com/repos/Codertocat/Hello-World/pulls/2"
                },
                "html": {"href": "https://github.com/Codertocat/Hello-World/pull/2"},
                "issue": {
                    "href": "https://api.github.com/repos/Codertocat/Hello-World/issues/2"
                },
                "comments": {
                    "href": "https://api.github.com/repos/Codertocat/Hello-World/issues/2/comments"
                },
                "review_comments": {
                    "href": "https://api.github.com/repos/Codertocat/Hello-World/pulls/2/comments"
                },
                "review_comment": {
                    "href": "https://api.github.com/repos/Codertocat/Hello-World/pulls/comments{/number}"
                },
                "commits": {
                    "href": "https://api.github.com/repos/Codertocat/Hello-World/pulls/2/commits"
                },
                "statuses": {
                    "href": "https://api.github.com/repos/Codertocat/Hello-World/statuses/ec26c3e57ca3a959ca5aad62de7213c562f8c821"
                },
            },
            "author_association": "OWNER",
            "auto_merge": None,
            "active_lock_reason": None,
            "draft": False,
            "merged": False,
            "mergeable": True,
            "rebaseable": True,
            "mergeable_state": "clean",
            "merged_by": None,
            "comments": 0,
            "review_comments": 0,
            "maintainer_can_modify": False,
            "commits": 1,
            "additions": 1,
            "deletions": 1,
            "changed_files": 1,
        },
        "assignee": {
            "login": "Codertocat",
            "id": 21031067,
            "node_id": "MDQ6VXNlcjIxMDMxMDY3",
            "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Codertocat",
            "html_url": "https://github.com/Codertocat",
            "followers_url": "https://api.github.com/users/Codertocat/followers",
            "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
            "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
            "organizations_url": "https://api.github.com/users/Codertocat/orgs",
            "repos_url": "https://api.github.com/users/Codertocat/repos",
            "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Codertocat/received_events",
            "type": "User",
            "site_admin": False,
        },
        "repository": {
            "id": 186853002,
            "node_id": "MDEwOlJlcG9zaXRvcnkxODY4NTMwMDI=",
            "name": "Hello-World",
            "full_name": "Codertocat/Hello-World",
            "private": False,
            "owner": {
                "login": "Codertocat",
                "id": 21031067,
                "node_id": "MDQ6VXNlcjIxMDMxMDY3",
                "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Codertocat",
                "html_url": "https://github.com/Codertocat",
                "followers_url": "https://api.github.com/users/Codertocat/followers",
                "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
                "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
                "organizations_url": "https://api.github.com/users/Codertocat/orgs",
                "repos_url": "https://api.github.com/users/Codertocat/repos",
                "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Codertocat/received_events",
                "type": "User",
                "site_admin": False,
            },
            "html_url": "https://github.com/Codertocat/Hello-World",
            "description": None,
            "fork": False,
            "url": "https://api.github.com/repos/Codertocat/Hello-World",
            "forks_url": "https://api.github.com/repos/Codertocat/Hello-World/forks",
            "keys_url": "https://api.github.com/repos/Codertocat/Hello-World/keys{/key_id}",
            "collaborators_url": "https://api.github.com/repos/Codertocat/Hello-World/collaborators{/collaborator}",
            "teams_url": "https://api.github.com/repos/Codertocat/Hello-World/teams",
            "hooks_url": "https://api.github.com/repos/Codertocat/Hello-World/hooks",
            "issue_events_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/events{/number}",
            "events_url": "https://api.github.com/repos/Codertocat/Hello-World/events",
            "assignees_url": "https://api.github.com/repos/Codertocat/Hello-World/assignees{/user}",
            "branches_url": "https://api.github.com/repos/Codertocat/Hello-World/branches{/branch}",
            "tags_url": "https://api.github.com/repos/Codertocat/Hello-World/tags",
            "blobs_url": "https://api.github.com/repos/Codertocat/Hello-World/git/blobs{/sha}",
            "git_tags_url": "https://api.github.com/repos/Codertocat/Hello-World/git/tags{/sha}",
            "git_refs_url": "https://api.github.com/repos/Codertocat/Hello-World/git/refs{/sha}",
            "trees_url": "https://api.github.com/repos/Codertocat/Hello-World/git/trees{/sha}",
            "statuses_url": "https://api.github.com/repos/Codertocat/Hello-World/statuses/{sha}",
            "languages_url": "https://api.github.com/repos/Codertocat/Hello-World/languages",
            "stargazers_url": "https://api.github.com/repos/Codertocat/Hello-World/stargazers",
            "contributors_url": "https://api.github.com/repos/Codertocat/Hello-World/contributors",
            "subscribers_url": "https://api.github.com/repos/Codertocat/Hello-World/subscribers",
            "subscription_url": "https://api.github.com/repos/Codertocat/Hello-World/subscription",
            "commits_url": "https://api.github.com/repos/Codertocat/Hello-World/commits{/sha}",
            "git_commits_url": "https://api.github.com/repos/Codertocat/Hello-World/git/commits{/sha}",
            "comments_url": "https://api.github.com/repos/Codertocat/Hello-World/comments{/number}",
            "issue_comment_url": "https://api.github.com/repos/Codertocat/Hello-World/issues/comments{/number}",
            "contents_url": "https://api.github.com/repos/Codertocat/Hello-World/contents/{+path}",
            "compare_url": "https://api.github.com/repos/Codertocat/Hello-World/compare/{base}...{head}",
            "merges_url": "https://api.github.com/repos/Codertocat/Hello-World/merges",
            "archive_url": "https://api.github.com/repos/Codertocat/Hello-World/{archive_format}{/ref}",
            "downloads_url": "https://api.github.com/repos/Codertocat/Hello-World/downloads",
            "issues_url": "https://api.github.com/repos/Codertocat/Hello-World/issues{/number}",
            "pulls_url": "https://api.github.com/repos/Codertocat/Hello-World/pulls{/number}",
            "milestones_url": "https://api.github.com/repos/Codertocat/Hello-World/milestones{/number}",
            "notifications_url": "https://api.github.com/repos/Codertocat/Hello-World/notifications{?since,all,participating}",
            "labels_url": "https://api.github.com/repos/Codertocat/Hello-World/labels{/name}",
            "releases_url": "https://api.github.com/repos/Codertocat/Hello-World/releases{/id}",
            "deployments_url": "https://api.github.com/repos/Codertocat/Hello-World/deployments",
            "created_at": "2019-05-15T15:19:25Z",
            "updated_at": "2019-05-15T15:20:34Z",
            "pushed_at": "2019-05-15T15:20:33Z",
            "git_url": "git://github.com/Codertocat/Hello-World.git",
            "ssh_url": "git@github.com:Codertocat/Hello-World.git",
            "clone_url": "https://github.com/Codertocat/Hello-World.git",
            "svn_url": "https://github.com/Codertocat/Hello-World",
            "homepage": None,
            "size": 0,
            "stargazers_count": 0,
            "watchers_count": 0,
            "language": "Ruby",
            "has_issues": True,
            "has_projects": True,
            "has_downloads": True,
            "has_wiki": True,
            "has_pages": True,
            "forks_count": 0,
            "mirror_url": None,
            "archived": False,
            "disabled": False,
            "open_issues_count": 2,
            "license": None,
            "forks": 0,
            "open_issues": 2,
            "watchers": 0,
            "default_branch": "master",
            "is_template": False,
            "topics": [],
            "visibility": "public",
        },
        "installation": {
            "id": 1,
            "node_id": "MDIzOkludGVncmF0aW9uSW5zdGFsbGF0aW9uMQ==",
        },
        "sender": {
            "login": "Codertocat",
            "id": 21031067,
            "node_id": "MDQ6VXNlcjIxMDMxMDY3",
            "avatar_url": "https://avatars1.githubusercontent.com/u/21031067?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Codertocat",
            "html_url": "https://github.com/Codertocat",
            "followers_url": "https://api.github.com/users/Codertocat/followers",
            "following_url": "https://api.github.com/users/Codertocat/following{/other_user}",
            "gists_url": "https://api.github.com/users/Codertocat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Codertocat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Codertocat/subscriptions",
            "organizations_url": "https://api.github.com/users/Codertocat/orgs",
            "repos_url": "https://api.github.com/users/Codertocat/repos",
            "events_url": "https://api.github.com/users/Codertocat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Codertocat/received_events",
            "type": "User",
            "site_admin": False,
        },
    }

    parsed = PullRequestAssigned.parse_obj(_preprocess_keys(event_json))
    # parsed = resolve_event(event_json)
    # assert isinstance(parsed, BranchProtectionRuleEdited)
